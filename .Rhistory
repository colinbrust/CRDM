lubridate::as_date()) %>%
dplyr::arrange(date) %>%
dplyr::mutate(date = lubridate::ceiling_date(date, unit = 'month'))
tibble::tibble(
Y2000 = c(-1.26    ,-1.27  , -1.36 ,   -0.93 ,   -0.97 ,   -1.14 ,  -0.58 ,  -0.08 ,   -0.36 ,   -0.55 ,   -0.91 ,  -0.8),
Y2001 = c(-0.82    ,-0.87  , -0.79 ,   -0.61 ,   -0.58 ,   -0.71 ,  -0.02 ,   0.34 ,   -0.07 ,   -0.25 ,   -0.32 ,   0.0),
Y2002 = c(0.07    ,-0.26   ,-0.20    ,-0.36  ,  -0.10  ,   0.40  ,  0.42  ,  0.97  ,   0.84  ,   0.79  ,   0.76  ,  0.86),
Y2003 = c(0.80     ,0.62   , 0.53    ,-0.08  ,  -0.57  ,  -0.07  ,  0.01  ,  0.01  ,   0.14  ,   0.26  ,   0.29  ,  0.10),
Y2004 = c(0.16    ,-0.04   ,-0.44    ,-0.23  ,  -0.44  ,  -0.34  ,  0.43  ,  0.74  ,   0.54  ,   0.34  ,   0.51  ,  0.51),
Y2005 = c(0.08     ,0.61   , 0.82    , 0.13  ,   0.18  ,   0.20  , -0.02  , -0.01  ,  -0.05  ,  -0.71  ,  -0.75  , -0.73),
Y2006 = c(-0.68    ,-0.50  , -0.61 ,   -0.84 ,   -0.43 ,   -0.23 ,   0.11 ,   0.56 ,    0.63 ,    0.68 ,    0.90 ,   0.5),
Y2007 = c(0.62     ,0.39   ,-0.22    ,-0.36  ,  -0.44  ,  -0.86  , -0.77  , -0.93  ,  -1.10  ,  -1.14  ,  -1.13  , -1.22),
Y2008 = c(-1.08    ,-1.27  , -1.54 ,   -1.13 ,   -0.98 ,   -0.86 ,  -0.87 ,  -1.08 ,   -1.07 ,   -1.12 ,   -1.05 ,  -1.0),
Y2009 = c(-1.01    ,-0.85  , -0.94 ,   -0.81 ,   -0.72 ,   -0.06 ,   0.49 ,   0.52 ,    0.39 ,    0.56 ,    1.05 ,   0.9),
Y2010 = c(0.93     ,1.28   , 1.31    , 0.49  ,  -0.17  ,  -1.33  , -2.43  , -2.40  ,  -2.28  ,  -2.18  ,  -2.04  , -1.91),
Y2011 = c(-1.83    ,-1.63  , -1.79 ,   -1.74 ,   -1.29 ,   -1.08 ,  -0.86 ,  -0.88 ,   -1.16 ,   -1.37 ,   -1.21 ,  -1.2),
Y2012 = c(-1.08    ,-0.67  , -0.59 ,   -0.43 ,   -0.35 ,   -0.28 ,   0.30 ,  -0.06 ,   -0.32 ,   -0.22 ,   -0.07 ,  -0.0),
Y2013 = c(-0.05    ,-0.07  , -0.14 ,   -0.37 ,   -0.71 ,   -1.18 ,  -0.85 ,  -0.50 ,   -0.38 ,   -0.16 ,   -0.18 ,  -0.3),
Y2014 = c(-0.51,    -0.43  , -0.08 ,   -0.16 ,   -0.18 ,   -0.01 ,   0.32 ,   0.16 ,   -0.15 ,    0.07 ,    0.34 ,   0.3),
Y2015 = c(0.23     ,0.05   , 0.13    , 0.35  ,   0.96  ,   1.85  ,  1.73  ,  1.92  ,   2.21  ,   2.11  ,   1.88  ,  1.90),
Y2016 = c(1.94     ,1.81   , 1.31    , 1.33  ,   1.26  ,   0.36  , -0.51  , -0.28  ,  -0.34  ,  -0.60  ,  -0.51  , -0.34),
Y2017 = c(-0.41    ,-0.41  , -0.58 ,   -0.21 ,    0.17 ,   -0.29 ,  -0.70 ,  -0.77 ,   -0.80 ,   -0.63 ,   -0.63 ,  -0.7),
Y2018 = c(-0.77    ,-0.70  , -0.79 ,   -1.29 ,   -0.91 ,   -0.51 ,  -0.17 ,   0.36 ,    0.52 ,    0.41 ,    0.26 ,   0.1),
Y2019 = c(0.08     ,0.52   , 0.77    , 0.33  ,   0.26  ,   0.35  ,  0.24  ,  0.30  ,   0.15  ,   0.27  ,   0.45  ,  0.41),
Y2020 = c(0.29     ,0.30   , 0.15    ,-0.11  ,  -0.24  ,  -0.73  , -1.00  , -0.99  ,  -1.19  ,  -1.20  ,  -1.15  , -1.16)
) %>%
tibble::rowid_to_column(var = 'month') %>%
tidyr::pivot_longer(-month) %>%
dplyr::mutate(name = stringr::str_replace(name, 'Y', '') %>%
as.character(),
month = stringr::str_pad(as.character(month), 2, pad='0'),
date = paste(name, month, '01', sep='-') %>%
lubridate::as_date()) %>%
dplyr::arrange(date) %>%
dplyr::mutate(date = lubridate::ceiling_date(date, unit = 'month') - 1)
tibble::tibble(
Y2000 = c(-1.26    ,-1.27  , -1.36 ,   -0.93 ,   -0.97 ,   -1.14 ,  -0.58 ,  -0.08 ,   -0.36 ,   -0.55 ,   -0.91 ,  -0.8),
Y2001 = c(-0.82    ,-0.87  , -0.79 ,   -0.61 ,   -0.58 ,   -0.71 ,  -0.02 ,   0.34 ,   -0.07 ,   -0.25 ,   -0.32 ,   0.0),
Y2002 = c(0.07    ,-0.26   ,-0.20    ,-0.36  ,  -0.10  ,   0.40  ,  0.42  ,  0.97  ,   0.84  ,   0.79  ,   0.76  ,  0.86),
Y2003 = c(0.80     ,0.62   , 0.53    ,-0.08  ,  -0.57  ,  -0.07  ,  0.01  ,  0.01  ,   0.14  ,   0.26  ,   0.29  ,  0.10),
Y2004 = c(0.16    ,-0.04   ,-0.44    ,-0.23  ,  -0.44  ,  -0.34  ,  0.43  ,  0.74  ,   0.54  ,   0.34  ,   0.51  ,  0.51),
Y2005 = c(0.08     ,0.61   , 0.82    , 0.13  ,   0.18  ,   0.20  , -0.02  , -0.01  ,  -0.05  ,  -0.71  ,  -0.75  , -0.73),
Y2006 = c(-0.68    ,-0.50  , -0.61 ,   -0.84 ,   -0.43 ,   -0.23 ,   0.11 ,   0.56 ,    0.63 ,    0.68 ,    0.90 ,   0.5),
Y2007 = c(0.62     ,0.39   ,-0.22    ,-0.36  ,  -0.44  ,  -0.86  , -0.77  , -0.93  ,  -1.10  ,  -1.14  ,  -1.13  , -1.22),
Y2008 = c(-1.08    ,-1.27  , -1.54 ,   -1.13 ,   -0.98 ,   -0.86 ,  -0.87 ,  -1.08 ,   -1.07 ,   -1.12 ,   -1.05 ,  -1.0),
Y2009 = c(-1.01    ,-0.85  , -0.94 ,   -0.81 ,   -0.72 ,   -0.06 ,   0.49 ,   0.52 ,    0.39 ,    0.56 ,    1.05 ,   0.9),
Y2010 = c(0.93     ,1.28   , 1.31    , 0.49  ,  -0.17  ,  -1.33  , -2.43  , -2.40  ,  -2.28  ,  -2.18  ,  -2.04  , -1.91),
Y2011 = c(-1.83    ,-1.63  , -1.79 ,   -1.74 ,   -1.29 ,   -1.08 ,  -0.86 ,  -0.88 ,   -1.16 ,   -1.37 ,   -1.21 ,  -1.2),
Y2012 = c(-1.08    ,-0.67  , -0.59 ,   -0.43 ,   -0.35 ,   -0.28 ,   0.30 ,  -0.06 ,   -0.32 ,   -0.22 ,   -0.07 ,  -0.0),
Y2013 = c(-0.05    ,-0.07  , -0.14 ,   -0.37 ,   -0.71 ,   -1.18 ,  -0.85 ,  -0.50 ,   -0.38 ,   -0.16 ,   -0.18 ,  -0.3),
Y2014 = c(-0.51,    -0.43  , -0.08 ,   -0.16 ,   -0.18 ,   -0.01 ,   0.32 ,   0.16 ,   -0.15 ,    0.07 ,    0.34 ,   0.3),
Y2015 = c(0.23     ,0.05   , 0.13    , 0.35  ,   0.96  ,   1.85  ,  1.73  ,  1.92  ,   2.21  ,   2.11  ,   1.88  ,  1.90),
Y2016 = c(1.94     ,1.81   , 1.31    , 1.33  ,   1.26  ,   0.36  , -0.51  , -0.28  ,  -0.34  ,  -0.60  ,  -0.51  , -0.34),
Y2017 = c(-0.41    ,-0.41  , -0.58 ,   -0.21 ,    0.17 ,   -0.29 ,  -0.70 ,  -0.77 ,   -0.80 ,   -0.63 ,   -0.63 ,  -0.7),
Y2018 = c(-0.77    ,-0.70  , -0.79 ,   -1.29 ,   -0.91 ,   -0.51 ,  -0.17 ,   0.36 ,    0.52 ,    0.41 ,    0.26 ,   0.1),
Y2019 = c(0.08     ,0.52   , 0.77    , 0.33  ,   0.26  ,   0.35  ,  0.24  ,  0.30  ,   0.15  ,   0.27  ,   0.45  ,  0.41),
Y2020 = c(0.29     ,0.30   , 0.15    ,-0.11  ,  -0.24  ,  -0.73  , -1.00  , -0.99  ,  -1.19  ,  -1.20  ,  -1.15  , -1.16)
) %>%
tibble::rowid_to_column(var = 'month') %>%
tidyr::pivot_longer(-month) %>%
dplyr::mutate(name = stringr::str_replace(name, 'Y', '') %>%
as.character(),
month = stringr::str_pad(as.character(month), 2, pad='0'),
date = paste(name, month, '01', sep='-') %>%
lubridate::as_date()) %>%
dplyr::arrange(date) %>%
dplyr::mutate(date = lubridate::ceiling_date(date, unit = 'month') - 1) %>%
ggplot(aes(x=date, y=value))
lubridate::ceilibrary(ggplot2)
library(ggplot2)
tibble::tibble(
Y2000 = c(-1.26    ,-1.27  , -1.36 ,   -0.93 ,   -0.97 ,   -1.14 ,  -0.58 ,  -0.08 ,   -0.36 ,   -0.55 ,   -0.91 ,  -0.8),
Y2001 = c(-0.82    ,-0.87  , -0.79 ,   -0.61 ,   -0.58 ,   -0.71 ,  -0.02 ,   0.34 ,   -0.07 ,   -0.25 ,   -0.32 ,   0.0),
Y2002 = c(0.07    ,-0.26   ,-0.20    ,-0.36  ,  -0.10  ,   0.40  ,  0.42  ,  0.97  ,   0.84  ,   0.79  ,   0.76  ,  0.86),
Y2003 = c(0.80     ,0.62   , 0.53    ,-0.08  ,  -0.57  ,  -0.07  ,  0.01  ,  0.01  ,   0.14  ,   0.26  ,   0.29  ,  0.10),
Y2004 = c(0.16    ,-0.04   ,-0.44    ,-0.23  ,  -0.44  ,  -0.34  ,  0.43  ,  0.74  ,   0.54  ,   0.34  ,   0.51  ,  0.51),
Y2005 = c(0.08     ,0.61   , 0.82    , 0.13  ,   0.18  ,   0.20  , -0.02  , -0.01  ,  -0.05  ,  -0.71  ,  -0.75  , -0.73),
Y2006 = c(-0.68    ,-0.50  , -0.61 ,   -0.84 ,   -0.43 ,   -0.23 ,   0.11 ,   0.56 ,    0.63 ,    0.68 ,    0.90 ,   0.5),
Y2007 = c(0.62     ,0.39   ,-0.22    ,-0.36  ,  -0.44  ,  -0.86  , -0.77  , -0.93  ,  -1.10  ,  -1.14  ,  -1.13  , -1.22),
Y2008 = c(-1.08    ,-1.27  , -1.54 ,   -1.13 ,   -0.98 ,   -0.86 ,  -0.87 ,  -1.08 ,   -1.07 ,   -1.12 ,   -1.05 ,  -1.0),
Y2009 = c(-1.01    ,-0.85  , -0.94 ,   -0.81 ,   -0.72 ,   -0.06 ,   0.49 ,   0.52 ,    0.39 ,    0.56 ,    1.05 ,   0.9),
Y2010 = c(0.93     ,1.28   , 1.31    , 0.49  ,  -0.17  ,  -1.33  , -2.43  , -2.40  ,  -2.28  ,  -2.18  ,  -2.04  , -1.91),
Y2011 = c(-1.83    ,-1.63  , -1.79 ,   -1.74 ,   -1.29 ,   -1.08 ,  -0.86 ,  -0.88 ,   -1.16 ,   -1.37 ,   -1.21 ,  -1.2),
Y2012 = c(-1.08    ,-0.67  , -0.59 ,   -0.43 ,   -0.35 ,   -0.28 ,   0.30 ,  -0.06 ,   -0.32 ,   -0.22 ,   -0.07 ,  -0.0),
Y2013 = c(-0.05    ,-0.07  , -0.14 ,   -0.37 ,   -0.71 ,   -1.18 ,  -0.85 ,  -0.50 ,   -0.38 ,   -0.16 ,   -0.18 ,  -0.3),
Y2014 = c(-0.51,    -0.43  , -0.08 ,   -0.16 ,   -0.18 ,   -0.01 ,   0.32 ,   0.16 ,   -0.15 ,    0.07 ,    0.34 ,   0.3),
Y2015 = c(0.23     ,0.05   , 0.13    , 0.35  ,   0.96  ,   1.85  ,  1.73  ,  1.92  ,   2.21  ,   2.11  ,   1.88  ,  1.90),
Y2016 = c(1.94     ,1.81   , 1.31    , 1.33  ,   1.26  ,   0.36  , -0.51  , -0.28  ,  -0.34  ,  -0.60  ,  -0.51  , -0.34),
Y2017 = c(-0.41    ,-0.41  , -0.58 ,   -0.21 ,    0.17 ,   -0.29 ,  -0.70 ,  -0.77 ,   -0.80 ,   -0.63 ,   -0.63 ,  -0.7),
Y2018 = c(-0.77    ,-0.70  , -0.79 ,   -1.29 ,   -0.91 ,   -0.51 ,  -0.17 ,   0.36 ,    0.52 ,    0.41 ,    0.26 ,   0.1),
Y2019 = c(0.08     ,0.52   , 0.77    , 0.33  ,   0.26  ,   0.35  ,  0.24  ,  0.30  ,   0.15  ,   0.27  ,   0.45  ,  0.41),
Y2020 = c(0.29     ,0.30   , 0.15    ,-0.11  ,  -0.24  ,  -0.73  , -1.00  , -0.99  ,  -1.19  ,  -1.20  ,  -1.15  , -1.16)
) %>%
tibble::rowid_to_column(var = 'month') %>%
tidyr::pivot_longer(-month) %>%
dplyr::mutate(name = stringr::str_replace(name, 'Y', '') %>%
as.character(),
month = stringr::str_pad(as.character(month), 2, pad='0'),
date = paste(name, month, '01', sep='-') %>%
lubridate::as_date()) %>%
dplyr::arrange(date) %>%
dplyr::mutate(date = lubridate::ceiling_date(date, unit = 'month') - 1) %>%
ggplot(aes(x=date, y=value)) + geom_line()
list.files('~/projects/DroughtCast/data/out_classes/tif')
list.files('~/projects/DroughtCast/data/out_classes/tif') %>%
stringr::str_split('_')
list.files('~/projects/DroughtCast/data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head(1))
help("head")
list.files('~/projects/DroughtCast/data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1)
list.files('~/projects/DroughtCast/data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
lubridate::as_date()
list.files('~/projects/DroughtCast/data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
lapply(lubridate::as_date)
list.files('~/projects/DroughtCast/data/out_classes/tif') %>%
stringr::str_split('_') %>%
unlist()
list.files('~/projects/DroughtCast/data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
unlist()
list.files('~/projects/DroughtCast/data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
unlist() %>%
lubridate::as_date()
list.files('./data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
unlist() %>%
lubridate::as_date()
week_dates <- list.files('./data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
unlist() %>%
lubridate::as_date()
mei <- tibble::tibble(
Y2000 = c(-1.26    ,-1.27  , -1.36 ,   -0.93 ,   -0.97 ,   -1.14 ,  -0.58 ,  -0.08 ,   -0.36 ,   -0.55 ,   -0.91 ,  -0.8),
Y2001 = c(-0.82    ,-0.87  , -0.79 ,   -0.61 ,   -0.58 ,   -0.71 ,  -0.02 ,   0.34 ,   -0.07 ,   -0.25 ,   -0.32 ,   0.0),
Y2002 = c(0.07    ,-0.26   ,-0.20    ,-0.36  ,  -0.10  ,   0.40  ,  0.42  ,  0.97  ,   0.84  ,   0.79  ,   0.76  ,  0.86),
Y2003 = c(0.80     ,0.62   , 0.53    ,-0.08  ,  -0.57  ,  -0.07  ,  0.01  ,  0.01  ,   0.14  ,   0.26  ,   0.29  ,  0.10),
Y2004 = c(0.16    ,-0.04   ,-0.44    ,-0.23  ,  -0.44  ,  -0.34  ,  0.43  ,  0.74  ,   0.54  ,   0.34  ,   0.51  ,  0.51),
Y2005 = c(0.08     ,0.61   , 0.82    , 0.13  ,   0.18  ,   0.20  , -0.02  , -0.01  ,  -0.05  ,  -0.71  ,  -0.75  , -0.73),
Y2006 = c(-0.68    ,-0.50  , -0.61 ,   -0.84 ,   -0.43 ,   -0.23 ,   0.11 ,   0.56 ,    0.63 ,    0.68 ,    0.90 ,   0.5),
Y2007 = c(0.62     ,0.39   ,-0.22    ,-0.36  ,  -0.44  ,  -0.86  , -0.77  , -0.93  ,  -1.10  ,  -1.14  ,  -1.13  , -1.22),
Y2008 = c(-1.08    ,-1.27  , -1.54 ,   -1.13 ,   -0.98 ,   -0.86 ,  -0.87 ,  -1.08 ,   -1.07 ,   -1.12 ,   -1.05 ,  -1.0),
Y2009 = c(-1.01    ,-0.85  , -0.94 ,   -0.81 ,   -0.72 ,   -0.06 ,   0.49 ,   0.52 ,    0.39 ,    0.56 ,    1.05 ,   0.9),
Y2010 = c(0.93     ,1.28   , 1.31    , 0.49  ,  -0.17  ,  -1.33  , -2.43  , -2.40  ,  -2.28  ,  -2.18  ,  -2.04  , -1.91),
Y2011 = c(-1.83    ,-1.63  , -1.79 ,   -1.74 ,   -1.29 ,   -1.08 ,  -0.86 ,  -0.88 ,   -1.16 ,   -1.37 ,   -1.21 ,  -1.2),
Y2012 = c(-1.08    ,-0.67  , -0.59 ,   -0.43 ,   -0.35 ,   -0.28 ,   0.30 ,  -0.06 ,   -0.32 ,   -0.22 ,   -0.07 ,  -0.0),
Y2013 = c(-0.05    ,-0.07  , -0.14 ,   -0.37 ,   -0.71 ,   -1.18 ,  -0.85 ,  -0.50 ,   -0.38 ,   -0.16 ,   -0.18 ,  -0.3),
Y2014 = c(-0.51,    -0.43  , -0.08 ,   -0.16 ,   -0.18 ,   -0.01 ,   0.32 ,   0.16 ,   -0.15 ,    0.07 ,    0.34 ,   0.3),
Y2015 = c(0.23     ,0.05   , 0.13    , 0.35  ,   0.96  ,   1.85  ,  1.73  ,  1.92  ,   2.21  ,   2.11  ,   1.88  ,  1.90),
Y2016 = c(1.94     ,1.81   , 1.31    , 1.33  ,   1.26  ,   0.36  , -0.51  , -0.28  ,  -0.34  ,  -0.60  ,  -0.51  , -0.34),
Y2017 = c(-0.41    ,-0.41  , -0.58 ,   -0.21 ,    0.17 ,   -0.29 ,  -0.70 ,  -0.77 ,   -0.80 ,   -0.63 ,   -0.63 ,  -0.7),
Y2018 = c(-0.77    ,-0.70  , -0.79 ,   -1.29 ,   -0.91 ,   -0.51 ,  -0.17 ,   0.36 ,    0.52 ,    0.41 ,    0.26 ,   0.1),
Y2019 = c(0.08     ,0.52   , 0.77    , 0.33  ,   0.26  ,   0.35  ,  0.24  ,  0.30  ,   0.15  ,   0.27  ,   0.45  ,  0.41),
Y2020 = c(0.29     ,0.30   , 0.15    ,-0.11  ,  -0.24  ,  -0.73  , -1.00  , -0.99  ,  -1.19  ,  -1.20  ,  -1.15  , -1.16)
) %>%
tibble::rowid_to_column(var = 'month') %>%
tidyr::pivot_longer(-month) %>%
dplyr::mutate(name = stringr::str_replace(name, 'Y', '') %>%
as.character(),
month = stringr::str_pad(as.character(month), 2, pad='0'),
date = paste(name, month, '01', sep='-') %>%
lubridate::as_date()) %>%
dplyr::arrange(date) %>%
dplyr::mutate(date = lubridate::ceiling_date(date, unit = 'month') - 1) %>%
ggplot(aes(x=date, y=value)) + geom_line()
mei
mei <- tibble::tibble(
Y2000 = c(-1.26    ,-1.27  , -1.36 ,   -0.93 ,   -0.97 ,   -1.14 ,  -0.58 ,  -0.08 ,   -0.36 ,   -0.55 ,   -0.91 ,  -0.8),
Y2001 = c(-0.82    ,-0.87  , -0.79 ,   -0.61 ,   -0.58 ,   -0.71 ,  -0.02 ,   0.34 ,   -0.07 ,   -0.25 ,   -0.32 ,   0.0),
Y2002 = c(0.07    ,-0.26   ,-0.20    ,-0.36  ,  -0.10  ,   0.40  ,  0.42  ,  0.97  ,   0.84  ,   0.79  ,   0.76  ,  0.86),
Y2003 = c(0.80     ,0.62   , 0.53    ,-0.08  ,  -0.57  ,  -0.07  ,  0.01  ,  0.01  ,   0.14  ,   0.26  ,   0.29  ,  0.10),
Y2004 = c(0.16    ,-0.04   ,-0.44    ,-0.23  ,  -0.44  ,  -0.34  ,  0.43  ,  0.74  ,   0.54  ,   0.34  ,   0.51  ,  0.51),
Y2005 = c(0.08     ,0.61   , 0.82    , 0.13  ,   0.18  ,   0.20  , -0.02  , -0.01  ,  -0.05  ,  -0.71  ,  -0.75  , -0.73),
Y2006 = c(-0.68    ,-0.50  , -0.61 ,   -0.84 ,   -0.43 ,   -0.23 ,   0.11 ,   0.56 ,    0.63 ,    0.68 ,    0.90 ,   0.5),
Y2007 = c(0.62     ,0.39   ,-0.22    ,-0.36  ,  -0.44  ,  -0.86  , -0.77  , -0.93  ,  -1.10  ,  -1.14  ,  -1.13  , -1.22),
Y2008 = c(-1.08    ,-1.27  , -1.54 ,   -1.13 ,   -0.98 ,   -0.86 ,  -0.87 ,  -1.08 ,   -1.07 ,   -1.12 ,   -1.05 ,  -1.0),
Y2009 = c(-1.01    ,-0.85  , -0.94 ,   -0.81 ,   -0.72 ,   -0.06 ,   0.49 ,   0.52 ,    0.39 ,    0.56 ,    1.05 ,   0.9),
Y2010 = c(0.93     ,1.28   , 1.31    , 0.49  ,  -0.17  ,  -1.33  , -2.43  , -2.40  ,  -2.28  ,  -2.18  ,  -2.04  , -1.91),
Y2011 = c(-1.83    ,-1.63  , -1.79 ,   -1.74 ,   -1.29 ,   -1.08 ,  -0.86 ,  -0.88 ,   -1.16 ,   -1.37 ,   -1.21 ,  -1.2),
Y2012 = c(-1.08    ,-0.67  , -0.59 ,   -0.43 ,   -0.35 ,   -0.28 ,   0.30 ,  -0.06 ,   -0.32 ,   -0.22 ,   -0.07 ,  -0.0),
Y2013 = c(-0.05    ,-0.07  , -0.14 ,   -0.37 ,   -0.71 ,   -1.18 ,  -0.85 ,  -0.50 ,   -0.38 ,   -0.16 ,   -0.18 ,  -0.3),
Y2014 = c(-0.51,    -0.43  , -0.08 ,   -0.16 ,   -0.18 ,   -0.01 ,   0.32 ,   0.16 ,   -0.15 ,    0.07 ,    0.34 ,   0.3),
Y2015 = c(0.23     ,0.05   , 0.13    , 0.35  ,   0.96  ,   1.85  ,  1.73  ,  1.92  ,   2.21  ,   2.11  ,   1.88  ,  1.90),
Y2016 = c(1.94     ,1.81   , 1.31    , 1.33  ,   1.26  ,   0.36  , -0.51  , -0.28  ,  -0.34  ,  -0.60  ,  -0.51  , -0.34),
Y2017 = c(-0.41    ,-0.41  , -0.58 ,   -0.21 ,    0.17 ,   -0.29 ,  -0.70 ,  -0.77 ,   -0.80 ,   -0.63 ,   -0.63 ,  -0.7),
Y2018 = c(-0.77    ,-0.70  , -0.79 ,   -1.29 ,   -0.91 ,   -0.51 ,  -0.17 ,   0.36 ,    0.52 ,    0.41 ,    0.26 ,   0.1),
Y2019 = c(0.08     ,0.52   , 0.77    , 0.33  ,   0.26  ,   0.35  ,  0.24  ,  0.30  ,   0.15  ,   0.27  ,   0.45  ,  0.41),
Y2020 = c(0.29     ,0.30   , 0.15    ,-0.11  ,  -0.24  ,  -0.73  , -1.00  , -0.99  ,  -1.19  ,  -1.20  ,  -1.15  , -1.16)
) %>%
tibble::rowid_to_column(var = 'month') %>%
tidyr::pivot_longer(-month) %>%
dplyr::mutate(name = stringr::str_replace(name, 'Y', '') %>%
as.character(),
month = stringr::str_pad(as.character(month), 2, pad='0'),
date = paste(name, month, '01', sep='-') %>%
lubridate::as_date()) %>%
dplyr::arrange(date) %>%
dplyr::mutate(date = lubridate::ceiling_date(date, unit = 'month') - 1)
mei
mei <- tibble::tibble(
Y2000 = c(-1.26    ,-1.27  , -1.36 ,   -0.93 ,   -0.97 ,   -1.14 ,  -0.58 ,  -0.08 ,   -0.36 ,   -0.55 ,   -0.91 ,  -0.8),
Y2001 = c(-0.82    ,-0.87  , -0.79 ,   -0.61 ,   -0.58 ,   -0.71 ,  -0.02 ,   0.34 ,   -0.07 ,   -0.25 ,   -0.32 ,   0.0),
Y2002 = c(0.07    ,-0.26   ,-0.20    ,-0.36  ,  -0.10  ,   0.40  ,  0.42  ,  0.97  ,   0.84  ,   0.79  ,   0.76  ,  0.86),
Y2003 = c(0.80     ,0.62   , 0.53    ,-0.08  ,  -0.57  ,  -0.07  ,  0.01  ,  0.01  ,   0.14  ,   0.26  ,   0.29  ,  0.10),
Y2004 = c(0.16    ,-0.04   ,-0.44    ,-0.23  ,  -0.44  ,  -0.34  ,  0.43  ,  0.74  ,   0.54  ,   0.34  ,   0.51  ,  0.51),
Y2005 = c(0.08     ,0.61   , 0.82    , 0.13  ,   0.18  ,   0.20  , -0.02  , -0.01  ,  -0.05  ,  -0.71  ,  -0.75  , -0.73),
Y2006 = c(-0.68    ,-0.50  , -0.61 ,   -0.84 ,   -0.43 ,   -0.23 ,   0.11 ,   0.56 ,    0.63 ,    0.68 ,    0.90 ,   0.5),
Y2007 = c(0.62     ,0.39   ,-0.22    ,-0.36  ,  -0.44  ,  -0.86  , -0.77  , -0.93  ,  -1.10  ,  -1.14  ,  -1.13  , -1.22),
Y2008 = c(-1.08    ,-1.27  , -1.54 ,   -1.13 ,   -0.98 ,   -0.86 ,  -0.87 ,  -1.08 ,   -1.07 ,   -1.12 ,   -1.05 ,  -1.0),
Y2009 = c(-1.01    ,-0.85  , -0.94 ,   -0.81 ,   -0.72 ,   -0.06 ,   0.49 ,   0.52 ,    0.39 ,    0.56 ,    1.05 ,   0.9),
Y2010 = c(0.93     ,1.28   , 1.31    , 0.49  ,  -0.17  ,  -1.33  , -2.43  , -2.40  ,  -2.28  ,  -2.18  ,  -2.04  , -1.91),
Y2011 = c(-1.83    ,-1.63  , -1.79 ,   -1.74 ,   -1.29 ,   -1.08 ,  -0.86 ,  -0.88 ,   -1.16 ,   -1.37 ,   -1.21 ,  -1.2),
Y2012 = c(-1.08    ,-0.67  , -0.59 ,   -0.43 ,   -0.35 ,   -0.28 ,   0.30 ,  -0.06 ,   -0.32 ,   -0.22 ,   -0.07 ,  -0.0),
Y2013 = c(-0.05    ,-0.07  , -0.14 ,   -0.37 ,   -0.71 ,   -1.18 ,  -0.85 ,  -0.50 ,   -0.38 ,   -0.16 ,   -0.18 ,  -0.3),
Y2014 = c(-0.51,    -0.43  , -0.08 ,   -0.16 ,   -0.18 ,   -0.01 ,   0.32 ,   0.16 ,   -0.15 ,    0.07 ,    0.34 ,   0.3),
Y2015 = c(0.23     ,0.05   , 0.13    , 0.35  ,   0.96  ,   1.85  ,  1.73  ,  1.92  ,   2.21  ,   2.11  ,   1.88  ,  1.90),
Y2016 = c(1.94     ,1.81   , 1.31    , 1.33  ,   1.26  ,   0.36  , -0.51  , -0.28  ,  -0.34  ,  -0.60  ,  -0.51  , -0.34),
Y2017 = c(-0.41    ,-0.41  , -0.58 ,   -0.21 ,    0.17 ,   -0.29 ,  -0.70 ,  -0.77 ,   -0.80 ,   -0.63 ,   -0.63 ,  -0.7),
Y2018 = c(-0.77    ,-0.70  , -0.79 ,   -1.29 ,   -0.91 ,   -0.51 ,  -0.17 ,   0.36 ,    0.52 ,    0.41 ,    0.26 ,   0.1),
Y2019 = c(0.08     ,0.52   , 0.77    , 0.33  ,   0.26  ,   0.35  ,  0.24  ,  0.30  ,   0.15  ,   0.27  ,   0.45  ,  0.41),
Y2020 = c(0.29     ,0.30   , 0.15    ,-0.11  ,  -0.24  ,  -0.73  , -1.00  , -0.99  ,  -1.19  ,  -1.20  ,  -1.15  , -1.16)
) %>%
tibble::rowid_to_column(var = 'month') %>%
tidyr::pivot_longer(-month) %>%
dplyr::mutate(name = stringr::str_replace(name, 'Y', '') %>%
as.character(),
month = stringr::str_pad(as.character(month), 2, pad='0'),
date = paste(name, month, '01', sep='-') %>%
lubridate::as_date()) %>%
dplyr::arrange(date) %>%
dplyr::mutate(date = lubridate::ceiling_date(date, unit = 'month') - 1) %>%
dplyr::select(value, date)
mei
week_dates <- list.files('./data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
unlist() %>%
lubridate::as_date() %>%
tibble::tibble('date' = .)
week_dates
dplyr::right_join(mei, week_dates)
20 * 12
dplyr::right_join(mei, week_dates) %>%
dplyr::arrange(date)
dplyr::full_join(mei, week_dates) %>%
dplyr::arrange(date)
week_dates <- list.files('./data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
unlist() %>%
lubridate::as_date() %>%
tibble::tibble('date' = .) %>%
dplyr::arrange(date)
week_dates
seq.Date(min(week_dates$date), max(week_dates$date))
seq.Date(min(week_dates$date), max(week_dates$date), by='day')
week_dates <- list.files('./data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
unlist() %>%
lubridate::as_date() %>%
seq.Date(min(.), max(.), by='day')
week_dates <- list.files('./data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
unlist() %>%
lubridate::as_date() %>%
seq.Date(min(.), max(.), by='day') %>%
tibble::tibble('date' = .) %>%
dplyr::arrange(date)
week_dates <- list.files('./data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
unlist() %>%
lubridate::as_date() %>%
seq.Date(min(.), max(.), by='day')
list.files('./data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
unlist() %>%
lubridate::as_date()
list.files('./data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
unlist() %>%
lubridate::as_date() %>% min()
week_dates <- list.files('./data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
unlist() %>%
lubridate::as_date() %>%
{seq.Date(min(.), max(.), by='day') }
week_dates
dplyr::right_join(mei, week_dates) %>%
dplyr::arrange(date)
week_dates <- list.files('./data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
unlist() %>%
lubridate::as_date() %>%
{seq.Date(min(.), max(.), by='day')}
week_dates <- list.files('./data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
unlist() %>%
lubridate::as_date() %>%
{seq.Date(min(.), max(.), by='day')} %>%
tibble::tibble('date' = .)
week_dates
dplyr::right_join(mei, week_dates) %>%
dplyr::arrange(date)
dplyr::right_join(mei, week_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(val_interp = zoo::na.approx(value, maxgap=35, rule=2))
dplyr::right_join(mei, week_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(val_interp = zoo::na.approx(value, maxgap=35, rule=2)) %>% ggplot(aes(x=date, y=val_tinerp)) + geom_line()
dplyr::right_join(mei, week_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(val_interp = zoo::na.approx(value, maxgap=35, rule=2)) %>% ggplot(aes(x=date, y=val_interp)) + geom_line()
dplyr::right_join(mei, week_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(val_interp = zoo::na.approx(value, maxgap=35, rule=1)) %>% ggplot(aes(x=date, y=val_interp)) + geom_line()
?zoo::na.approx
dplyr::right_join(mei, week_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(val_interp = zoo::na.approx(value, maxgap=35, rule=2)) %>% ggplot(aes(x=date, y=val_interp)) + geom_line()
drought_dates <- list.files('./data/out_classes/tif') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
unlist() %>%
lubridate::as_date()
all_dates <- drought_dates %>%
{seq.Date(min(.), max(.), by='day')} %>%
tibble::tibble('date' = .)
dplyr::right_join(mei, all) %>%
dplyr::arrange(date) %>%
dplyr::mutate(val_interp = zoo::na.approx(value, maxgap=35, rule=2))
dplyr::right_join(mei, all_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(val_interp = zoo::na.approx(value, maxgap=35, rule=2))
dplyr::right_join(mei, all_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(val_interp = zoo::na.approx(value, maxgap=35, rule=2)) %>% View()
dplyr::right_join(mei, all_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(val = zoo::na.approx(value, maxgap=35, rule=2))
dplyr::right_join(mei, all_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(value = zoo::na.approx(value, maxgap=35, rule=2))
drought_dates %<>%
tibble::tibble(date = .)
drought_dates
dplyr::right_join(mei, all_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(value = zoo::na.approx(value, maxgap=35, rule=2)) %>%
dplyr::right_join(drought_dates)
dplyr::right_join(mei, all_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(value = zoo::na.approx(value, maxgap=35, rule=2)) %>%
dplyr::right_join(drought_dates) %>%
ggplot(aes(x=date, y=value)) + geom_line()
ls
dplyr::right_join(mei, all_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(value = zoo::na.approx(value, maxgap=35, rule=2)) %>%
dplyr::right_join(drought_dates)
dplyr::right_join(mei, all_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(value = zoo::na.approx(value, maxgap=35, rule=2)) %>%
dplyr::right_join(drought_dates) %>%
readr::read_csv('./data/in_features/memmap/smart/mei.csv')
dplyr::right_join(mei, all_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(value = zoo::na.approx(value, maxgap=35, rule=2)) %>%
dplyr::right_join(drought_dates) %>% readr::read_csv('./data/in_features/memmap/smart/mei.csv')
dplyr::right_join(mei, all_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(value = zoo::na.approx(value, maxgap=35, rule=2)) %>%
dplyr::right_join(drought_dates) %>% readr::write_csv('./data/in_features/memmap/smart/mei.csv')
mei <- tibble::tibble(
Y2000 = c(-1.26    ,-1.27  , -1.36 ,   -0.93 ,   -0.97 ,   -1.14 ,  -0.58 ,  -0.08 ,   -0.36 ,   -0.55 ,   -0.91 ,  -0.8),
Y2001 = c(-0.82    ,-0.87  , -0.79 ,   -0.61 ,   -0.58 ,   -0.71 ,  -0.02 ,   0.34 ,   -0.07 ,   -0.25 ,   -0.32 ,   0.0),
Y2002 = c(0.07    ,-0.26   ,-0.20    ,-0.36  ,  -0.10  ,   0.40  ,  0.42  ,  0.97  ,   0.84  ,   0.79  ,   0.76  ,  0.86),
Y2003 = c(0.80     ,0.62   , 0.53    ,-0.08  ,  -0.57  ,  -0.07  ,  0.01  ,  0.01  ,   0.14  ,   0.26  ,   0.29  ,  0.10),
Y2004 = c(0.16    ,-0.04   ,-0.44    ,-0.23  ,  -0.44  ,  -0.34  ,  0.43  ,  0.74  ,   0.54  ,   0.34  ,   0.51  ,  0.51),
Y2005 = c(0.08     ,0.61   , 0.82    , 0.13  ,   0.18  ,   0.20  , -0.02  , -0.01  ,  -0.05  ,  -0.71  ,  -0.75  , -0.73),
Y2006 = c(-0.68    ,-0.50  , -0.61 ,   -0.84 ,   -0.43 ,   -0.23 ,   0.11 ,   0.56 ,    0.63 ,    0.68 ,    0.90 ,   0.5),
Y2007 = c(0.62     ,0.39   ,-0.22    ,-0.36  ,  -0.44  ,  -0.86  , -0.77  , -0.93  ,  -1.10  ,  -1.14  ,  -1.13  , -1.22),
Y2008 = c(-1.08    ,-1.27  , -1.54 ,   -1.13 ,   -0.98 ,   -0.86 ,  -0.87 ,  -1.08 ,   -1.07 ,   -1.12 ,   -1.05 ,  -1.0),
Y2009 = c(-1.01    ,-0.85  , -0.94 ,   -0.81 ,   -0.72 ,   -0.06 ,   0.49 ,   0.52 ,    0.39 ,    0.56 ,    1.05 ,   0.9),
Y2010 = c(0.93     ,1.28   , 1.31    , 0.49  ,  -0.17  ,  -1.33  , -2.43  , -2.40  ,  -2.28  ,  -2.18  ,  -2.04  , -1.91),
Y2011 = c(-1.83    ,-1.63  , -1.79 ,   -1.74 ,   -1.29 ,   -1.08 ,  -0.86 ,  -0.88 ,   -1.16 ,   -1.37 ,   -1.21 ,  -1.2),
Y2012 = c(-1.08    ,-0.67  , -0.59 ,   -0.43 ,   -0.35 ,   -0.28 ,   0.30 ,  -0.06 ,   -0.32 ,   -0.22 ,   -0.07 ,  -0.0),
Y2013 = c(-0.05    ,-0.07  , -0.14 ,   -0.37 ,   -0.71 ,   -1.18 ,  -0.85 ,  -0.50 ,   -0.38 ,   -0.16 ,   -0.18 ,  -0.3),
Y2014 = c(-0.51,    -0.43  , -0.08 ,   -0.16 ,   -0.18 ,   -0.01 ,   0.32 ,   0.16 ,   -0.15 ,    0.07 ,    0.34 ,   0.3),
Y2015 = c(0.23     ,0.05   , 0.13    , 0.35  ,   0.96  ,   1.85  ,  1.73  ,  1.92  ,   2.21  ,   2.11  ,   1.88  ,  1.90),
Y2016 = c(1.94     ,1.81   , 1.31    , 1.33  ,   1.26  ,   0.36  , -0.51  , -0.28  ,  -0.34  ,  -0.60  ,  -0.51  , -0.34),
Y2017 = c(-0.41    ,-0.41  , -0.58 ,   -0.21 ,    0.17 ,   -0.29 ,  -0.70 ,  -0.77 ,   -0.80 ,   -0.63 ,   -0.63 ,  -0.7),
Y2018 = c(-0.77    ,-0.70  , -0.79 ,   -1.29 ,   -0.91 ,   -0.51 ,  -0.17 ,   0.36 ,    0.52 ,    0.41 ,    0.26 ,   0.1),
Y2019 = c(0.08     ,0.52   , 0.77    , 0.33  ,   0.26  ,   0.35  ,  0.24  ,  0.30  ,   0.15  ,   0.27  ,   0.45  ,  0.41),
Y2020 = c(0.29     ,0.30   , 0.15    ,-0.11  ,  -0.24  ,  -0.73  , -1.00  , -0.99  ,  -1.19  ,  -1.20  ,  -1.15  , -1.16)
) %>%
tibble::rowid_to_column(var = 'month') %>%
tidyr::pivot_longer(-month) %>%
dplyr::mutate(name = stringr::str_replace(name, 'Y', '') %>%
as.character(),
month = stringr::str_pad(as.character(month), 2, pad='0'),
date = paste(name, month, '01', sep='-') %>%
lubridate::as_date()) %>%
dplyr::arrange(date) %>%
dplyr::mutate(date = lubridate::ceiling_date(date, unit = 'month') - 1) %>%
dplyr::select(value, date)
drought_dates <- list.files('./data/out_classes/memmap') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
unlist() %>%
lubridate::as_date()
all_dates <- drought_dates %>%
{seq.Date(min(.), max(.), by='day')} %>%
tibble::tibble('date' = .)
drought_dates %<>%
tibble::tibble(date = .)
dplyr::right_join(mei, all_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(value = zoo::na.approx(value, maxgap=35, rule=2)) %>%
dplyr::right_join(drought_dates) %>%
ggplot(aes(x=date, y=value)) + geom_line()
library(magrittr)
mei <- tibble::tibble(
Y2000 = c(-1.26    ,-1.27  , -1.36 ,   -0.93 ,   -0.97 ,   -1.14 ,  -0.58 ,  -0.08 ,   -0.36 ,   -0.55 ,   -0.91 ,  -0.8),
Y2001 = c(-0.82    ,-0.87  , -0.79 ,   -0.61 ,   -0.58 ,   -0.71 ,  -0.02 ,   0.34 ,   -0.07 ,   -0.25 ,   -0.32 ,   0.0),
Y2002 = c(0.07    ,-0.26   ,-0.20    ,-0.36  ,  -0.10  ,   0.40  ,  0.42  ,  0.97  ,   0.84  ,   0.79  ,   0.76  ,  0.86),
Y2003 = c(0.80     ,0.62   , 0.53    ,-0.08  ,  -0.57  ,  -0.07  ,  0.01  ,  0.01  ,   0.14  ,   0.26  ,   0.29  ,  0.10),
Y2004 = c(0.16    ,-0.04   ,-0.44    ,-0.23  ,  -0.44  ,  -0.34  ,  0.43  ,  0.74  ,   0.54  ,   0.34  ,   0.51  ,  0.51),
Y2005 = c(0.08     ,0.61   , 0.82    , 0.13  ,   0.18  ,   0.20  , -0.02  , -0.01  ,  -0.05  ,  -0.71  ,  -0.75  , -0.73),
Y2006 = c(-0.68    ,-0.50  , -0.61 ,   -0.84 ,   -0.43 ,   -0.23 ,   0.11 ,   0.56 ,    0.63 ,    0.68 ,    0.90 ,   0.5),
Y2007 = c(0.62     ,0.39   ,-0.22    ,-0.36  ,  -0.44  ,  -0.86  , -0.77  , -0.93  ,  -1.10  ,  -1.14  ,  -1.13  , -1.22),
Y2008 = c(-1.08    ,-1.27  , -1.54 ,   -1.13 ,   -0.98 ,   -0.86 ,  -0.87 ,  -1.08 ,   -1.07 ,   -1.12 ,   -1.05 ,  -1.0),
Y2009 = c(-1.01    ,-0.85  , -0.94 ,   -0.81 ,   -0.72 ,   -0.06 ,   0.49 ,   0.52 ,    0.39 ,    0.56 ,    1.05 ,   0.9),
Y2010 = c(0.93     ,1.28   , 1.31    , 0.49  ,  -0.17  ,  -1.33  , -2.43  , -2.40  ,  -2.28  ,  -2.18  ,  -2.04  , -1.91),
Y2011 = c(-1.83    ,-1.63  , -1.79 ,   -1.74 ,   -1.29 ,   -1.08 ,  -0.86 ,  -0.88 ,   -1.16 ,   -1.37 ,   -1.21 ,  -1.2),
Y2012 = c(-1.08    ,-0.67  , -0.59 ,   -0.43 ,   -0.35 ,   -0.28 ,   0.30 ,  -0.06 ,   -0.32 ,   -0.22 ,   -0.07 ,  -0.0),
Y2013 = c(-0.05    ,-0.07  , -0.14 ,   -0.37 ,   -0.71 ,   -1.18 ,  -0.85 ,  -0.50 ,   -0.38 ,   -0.16 ,   -0.18 ,  -0.3),
Y2014 = c(-0.51,    -0.43  , -0.08 ,   -0.16 ,   -0.18 ,   -0.01 ,   0.32 ,   0.16 ,   -0.15 ,    0.07 ,    0.34 ,   0.3),
Y2015 = c(0.23     ,0.05   , 0.13    , 0.35  ,   0.96  ,   1.85  ,  1.73  ,  1.92  ,   2.21  ,   2.11  ,   1.88  ,  1.90),
Y2016 = c(1.94     ,1.81   , 1.31    , 1.33  ,   1.26  ,   0.36  , -0.51  , -0.28  ,  -0.34  ,  -0.60  ,  -0.51  , -0.34),
Y2017 = c(-0.41    ,-0.41  , -0.58 ,   -0.21 ,    0.17 ,   -0.29 ,  -0.70 ,  -0.77 ,   -0.80 ,   -0.63 ,   -0.63 ,  -0.7),
Y2018 = c(-0.77    ,-0.70  , -0.79 ,   -1.29 ,   -0.91 ,   -0.51 ,  -0.17 ,   0.36 ,    0.52 ,    0.41 ,    0.26 ,   0.1),
Y2019 = c(0.08     ,0.52   , 0.77    , 0.33  ,   0.26  ,   0.35  ,  0.24  ,  0.30  ,   0.15  ,   0.27  ,   0.45  ,  0.41),
Y2020 = c(0.29     ,0.30   , 0.15    ,-0.11  ,  -0.24  ,  -0.73  , -1.00  , -0.99  ,  -1.19  ,  -1.20  ,  -1.15  , -1.16)
) %>%
tibble::rowid_to_column(var = 'month') %>%
tidyr::pivot_longer(-month) %>%
dplyr::mutate(name = stringr::str_replace(name, 'Y', '') %>%
as.character(),
month = stringr::str_pad(as.character(month), 2, pad='0'),
date = paste(name, month, '01', sep='-') %>%
lubridate::as_date()) %>%
dplyr::arrange(date) %>%
dplyr::mutate(date = lubridate::ceiling_date(date, unit = 'month') - 1) %>%
dplyr::select(value, date)
drought_dates <- list.files('./data/out_classes/memmap') %>%
stringr::str_split('_') %>%
lapply(head, n=1) %>%
unlist() %>%
lubridate::as_date()
all_dates <- drought_dates %>%
{seq.Date(min(.), max(.), by='day')} %>%
tibble::tibble('date' = .)
drought_dates %<>%
tibble::tibble(date = .)
dplyr::right_join(mei, all_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(value = zoo::na.approx(value, maxgap=35, rule=2)) %>%
dplyr::right_join(drought_dates) %>%
ggplot(aes(x=date, y=value)) + geom_line()
dplyr::right_join(mei, all_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(value = zoo::na.approx(value, maxgap=35, rule=2)) %>%
dplyr::right_join(drought_dates)
library(ggplot2)
dplyr::right_join(mei, all_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(value = zoo::na.approx(value, maxgap=35, rule=2)) %>%
dplyr::right_join(drought_dates) %>%
ggplot(aes(x=date, y=value)) + geom_line()
dplyr::right_join(mei, all_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(value = zoo::na.approx(value, maxgap=35, rule=2)) %>%
dplyr::right_join(drought_dates)
dplyr::right_join(mei, all_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(value = zoo::na.approx(value, maxgap=35, rule=2)) %>%
dplyr::right_join(drought_dates) %>%
readr::write_csv('/Users/colinbrust/projects/DroughtCast/data/in_features/memmap/smart/mei.csv')
dplyr::right_join(mei, all_dates) %>%
dplyr::arrange(date) %>%
dplyr::mutate(value = zoo::na.approx(value, maxgap=35, rule=2)) %>%
dplyr::right_join(drought_dates) %>%
readr::write_csv('/Users/colinbrust/projects/DroughtCast/data/in_features/memmap/smart/mei.csv')
